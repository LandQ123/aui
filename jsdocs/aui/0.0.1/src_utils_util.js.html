<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>src/utils/util.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="aria.html">aria</a></li><li><a href="module-Date-fecha.html">fecha</a></li><li><a href="module-TableStoreModule-TableStore.html">TableStore</a><ul class='methods'><li data-type='method'><a href="module-TableStoreModule-TableStore.html#cleanSelection">cleanSelection</a></li><li data-type='method'><a href="module-TableStoreModule-TableStore.html#clearFilter">clearFilter</a></li><li data-type='method'><a href="module-TableStoreModule-TableStore.html#clearSelection">clearSelection</a></li><li data-type='method'><a href="module-TableStoreModule-TableStore.html#clearSort">clearSort</a></li><li data-type='method'><a href="module-TableStoreModule-TableStore.html#commit">commit</a></li><li data-type='method'><a href="module-TableStoreModule-TableStore.html#isRowExpanded">isRowExpanded</a></li><li data-type='method'><a href="module-TableStoreModule-TableStore.html#isSelected">isSelected</a></li><li data-type='method'><a href="module-TableStoreModule-TableStore.html#scheduleLayout">scheduleLayout</a></li><li data-type='method'><a href="module-TableStoreModule-TableStore.html#setCurrentRowKey">setCurrentRowKey</a></li><li data-type='method'><a href="module-TableStoreModule-TableStore.html#setExpandRowKeys">setExpandRowKeys</a></li><li data-type='method'><a href="module-TableStoreModule-TableStore.html#toggleRowExpansion">toggleRowExpansion</a></li><li data-type='method'><a href="module-TableStoreModule-TableStore.html#toggleRowSelection">toggleRowSelection</a></li><li data-type='method'><a href="module-TableStoreModule-TableStore.html#updateAllSelected">updateAllSelected</a></li><li data-type='method'><a href="module-TableStoreModule-TableStore.html#updateColumns">updateColumns</a></li><li data-type='method'><a href="module-TableStoreModule-TableStore.html#updateCurrentRow">updateCurrentRow</a></li></ul></li><li><a href="Popper.html">Popper</a><ul class='methods'><li data-type='method'><a href="Popper.html#_getPosition">_getPosition</a></li><li data-type='method'><a href="Popper.html#_getPosition">_getPosition</a></li><li data-type='method'><a href="Popper.html#destroy">destroy</a></li><li data-type='method'><a href="Popper.html#destroy">destroy</a></li><li data-type='method'><a href="Popper.html#isModifierRequired">isModifierRequired</a></li><li data-type='method'><a href="Popper.html#isModifierRequired">isModifierRequired</a></li><li data-type='method'><a href="Popper.html#onCreate">onCreate</a></li><li data-type='method'><a href="Popper.html#onCreate">onCreate</a></li><li data-type='method'><a href="Popper.html#onUpdate">onUpdate</a></li><li data-type='method'><a href="Popper.html#onUpdate">onUpdate</a></li><li data-type='method'><a href="Popper.html#parse">parse</a></li><li data-type='method'><a href="Popper.html#parse">parse</a></li><li data-type='method'><a href="Popper.html#runModifiers">runModifiers</a></li><li data-type='method'><a href="Popper.html#runModifiers">runModifiers</a></li><li data-type='method'><a href="Popper.html#update">update</a></li><li data-type='method'><a href="Popper.html#update">update</a></li></ul></li></ul><h3>Modules</h3><ul><li><a href="module-Date.html">Date</a><ul class='methods'><li data-type='method'><a href="module-Date.html#~parse">parse</a></li></ul></li><li><a href="module-ResizeEvent.html">ResizeEvent</a></li><li><a href="module-TableStoreModule.html">TableStoreModule</a><ul class='methods'><li data-type='method'><a href="module-TableStoreModule.html#~doFlattenColumns">doFlattenColumns</a></li><li data-type='method'><a href="module-TableStoreModule.html#~getKeysMap">getKeysMap</a></li><li data-type='method'><a href="module-TableStoreModule.html#~sortData">sortData</a></li><li data-type='method'><a href="module-TableStoreModule.html#~toggleRowExpansion">toggleRowExpansion</a></li><li data-type='method'><a href="module-TableStoreModule.html#~toggleRowSelection">toggleRowSelection</a></li></ul></li><li><a href="module-TableUtilModule.html">TableUtilModule</a><ul class='methods'><li data-type='method'><a href="module-TableUtilModule.html#~isObject">isObject</a></li></ul></li><li><a href="module-UtilModule.html">UtilModule</a><ul class='methods'><li data-type='method'><a href="module-UtilModule.html#.getPropByPath">getPropByPath</a></li></ul></li></ul><h3>Namespaces</h3><ul><li><a href="module-TableStoreModule-TableStore_mutations.html">mutations</a><ul class='methods'><li data-type='method'><a href="module-TableStoreModule-TableStore_mutations.html#.changeSortCondition">changeSortCondition</a></li><li data-type='method'><a href="module-TableStoreModule-TableStore_mutations.html#.filterChange">filterChange</a></li><li data-type='method'><a href="module-TableStoreModule-TableStore_mutations.html#.insertColumn">insertColumn</a></li><li data-type='method'><a href="module-TableStoreModule-TableStore_mutations.html#.removeColumn">removeColumn</a></li><li data-type='method'><a href="module-TableStoreModule-TableStore_mutations.html#.rowSelectedChanged">rowSelectedChanged</a></li><li data-type='method'><a href="module-TableStoreModule-TableStore_mutations.html#.setCurrentRow">setCurrentRow</a></li><li data-type='method'><a href="module-TableStoreModule-TableStore_mutations.html#.setData">setData</a></li><li data-type='method'><a href="module-TableStoreModule-TableStore_mutations.html#.setHoverRow">setHoverRow</a></li><li data-type='method'><a href="module-TableStoreModule-TableStore_mutations.html#.sort">sort</a></li></ul></li><li><a href="Popper.modifiers.html">modifiers</a><ul class='methods'><li data-type='method'><a href="Popper.modifiers.html#.Popper#modifiers.applyStyle">Popper#modifiers.applyStyle</a></li><li data-type='method'><a href="Popper.modifiers.html#.Popper#modifiers.applyStyle">Popper#modifiers.applyStyle</a></li><li data-type='method'><a href="Popper.modifiers.html#.Popper#modifiers.arrow">Popper#modifiers.arrow</a></li><li data-type='method'><a href="Popper.modifiers.html#.Popper#modifiers.arrow">Popper#modifiers.arrow</a></li><li data-type='method'><a href="Popper.modifiers.html#.Popper#modifiers.flip">Popper#modifiers.flip</a></li><li data-type='method'><a href="Popper.modifiers.html#.Popper#modifiers.flip">Popper#modifiers.flip</a></li><li data-type='method'><a href="Popper.modifiers.html#.Popper#modifiers.keepTogether">Popper#modifiers.keepTogether</a></li><li data-type='method'><a href="Popper.modifiers.html#.Popper#modifiers.keepTogether">Popper#modifiers.keepTogether</a></li><li data-type='method'><a href="Popper.modifiers.html#.Popper#modifiers.offset">Popper#modifiers.offset</a></li><li data-type='method'><a href="Popper.modifiers.html#.Popper#modifiers.offset">Popper#modifiers.offset</a></li><li data-type='method'><a href="Popper.modifiers.html#.Popper#modifiers.preventOverflow">Popper#modifiers.preventOverflow</a></li><li data-type='method'><a href="Popper.modifiers.html#.Popper#modifiers.preventOverflow">Popper#modifiers.preventOverflow</a></li><li data-type='method'><a href="Popper.modifiers.html#.Popper#modifiers.shift">Popper#modifiers.shift</a></li><li data-type='method'><a href="Popper.modifiers.html#.Popper#modifiers.shift">Popper#modifiers.shift</a></li></ul></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">src/utils/util.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * 工具函数模块
 * @module UtilModule
 */

import Vue from 'vue';

const hasOwnProperty = Object.prototype.hasOwnProperty;

export function noop() {};

export function hasOwn(obj, key) {
  return hasOwnProperty.call(obj, key);
};

function extend(to, _from) {
  for (let key in _from) {
    to[key] = _from[key];
  }
  return to;
};

export function toObject(arr) {
  var res = {};
  for (let i = 0; i &lt; arr.length; i++) {
    if (arr[i]) {
      extend(res, arr[i]);
    }
  }
  return res;
};

/**
 * 通过 foo.bar 这种来获取对象中的属性
 * @param object
 * @param prop
 * @returns {*}
 * 这个函数另外一个更简洁的写法
 * const getValueByPath = function(obj, path){
    for (let i=0, path=path.split('.'), len=path.length; i&lt;len; i++){
      obj = obj[path[i]];
    };
    return obj;
  };

  testcase：
    let obj = {
      foo: { bar: 'baz' },
      a: { b: {c:false}}
    };
    console.log(getValueByPath(obj, 'a.b.c')); // false
 */
export const getValueByPath = function(object, prop) {
  prop = prop || '';
  const paths = prop.split('.');
  let current = object;
  let result = null;
  for (let i = 0, j = paths.length; i &lt; j; i++) {
    const path = paths[i];
    if (!current) break;

    if (i === j - 1) {
      result = current[path];
      break;
    }
    current = current[path];
  }
  return result;
};

// js对象通过属性路径获取属性值
/**
 *testcase：
    let obj = {
      foo: { bar: 'baz' },
      a: { b: {c:false}}
    };
    console.log(getPropByPath(obj, 'a.b.c')); // {o: {c: false}, k: "c", v: false}
 */
export function getPropByPath(obj, path, strict) {
  let tempObj = obj;
  path = path.replace(/\[(\w+)\]/g, '.$1');
  path = path.replace(/^\./, '');

  let keyArr = path.split('.');
  let i = 0;
  for (let len = keyArr.length; i &lt; len - 1; ++i) {
    if (!tempObj &amp;&amp; !strict) break;
    let key = keyArr[i];
    if (key in tempObj) {
      tempObj = tempObj[key];
    } else {
      if (strict) {
        throw new Error('please transfer a valid prop path to form item!');
      }
      break;
    }
  }
  return {
    o: tempObj,
    k: keyArr[i],
    v: tempObj ? tempObj[keyArr[i]] : null
  };
};

export const generateId = function() {
  return Math.floor(Math.random() * 10000);
};

export const valueEquals = (a, b) => {
  // see: https://stackoverflow.com/questions/3115982/how-to-check-if-two-arrays-are-equal-with-javascript
  if (a === b) return true;
  if (!(a instanceof Array)) return false;
  if (!(b instanceof Array)) return false;
  if (a.length !== b.length) return false;
  for (let i = 0; i !== a.length; ++i) {
    if (a[i] !== b[i]) return false;
  }
  return true;
};

export const escapeRegexpString = (value = '') => String(value).replace(/[|\\{}()[\]^$+*?.]/g, '\\$&amp;');

// TODO: use native Array.find, Array.findIndex when IE support is dropped
export const arrayFindIndex = function(arr, pred) {
  for (let i = 0; i !== arr.length; ++i) {
    if (pred(arr[i])) {
      return i;
    }
  }
  return -1;
};

export const arrayFind = function(arr, pred) {
  const idx = arrayFindIndex(arr, pred);
  return idx !== -1 ? arr[idx] : undefined;
};

// coerce truthy value to array
export const coerceTruthyValueToArray = function(val) {
  if (Array.isArray(val)) {
    return val;
  } else if (val) {
    return [val];
  } else {
    return [];
  }
};

export const isIE = function() {
  return !Vue.prototype.$isServer &amp;&amp; !isNaN(Number(document.documentMode));
};

export const isEdge = function() {
  return !Vue.prototype.$isServer &amp;&amp; navigator.userAgent.indexOf('Edge') > -1;
};
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Thu Nov 15 2018 19:20:48 GMT+0800 (GMT+08:00) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>


</body>
</html>
